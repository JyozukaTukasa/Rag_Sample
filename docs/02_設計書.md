# ğŸ—ï¸ è¨­è¨ˆæ›¸

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (Next.js)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer (React Components)                                â”‚
â”‚  â”œâ”€â”€ FileUpload.tsx    â”‚  ChatUI.tsx    â”‚  SearchExamples.tsx â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer (TypeScript)                          â”‚
â”‚  â”œâ”€â”€ advanced-search-engine.ts â”‚  gemini-api.ts â”‚  data-manager.ts â”‚
â”‚  â”œâ”€â”€ excel-reader.ts   â”‚  csv-reader.ts â”‚  file-reader.ts     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  External APIs & Storage                                    â”‚
â”‚  â”œâ”€â”€ Gemini API        â”‚  localStorage  â”‚  xlsx/papaparse     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
1. ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   Excel/CSV File â†’ FileUpload â†’ file-reader.ts â†’ PersonInfo[]

2. ãƒ‡ãƒ¼ã‚¿ä¿å­˜
   PersonInfo[] â†’ data-manager.ts â†’ localStorage

3. æ¤œç´¢ãƒ»ãƒãƒ£ãƒƒãƒˆ
   User Input â†’ advanced-search-engine.ts â†’ gemini-api.ts â†’ Gemini API

4. çµæœè¡¨ç¤º
   Response â†’ ChatUI â†’ User Interface
```

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Framework**: Next.js 14 (App Router)
- **Language**: TypeScript 5.x
- **UI Library**: React 18
- **Styling**: Tailwind CSS
- **Build Tool**: Next.js built-in

### å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```json
{
  "xlsx": "^0.18.5",           // Excelãƒ•ã‚¡ã‚¤ãƒ«è§£æ
  "papaparse": "^5.4.1",       // CSVãƒ•ã‚¡ã‚¤ãƒ«è§£æ
  "@google/generative-ai": "^0.2.1",  // Gemini API
  "react": "^18.2.0",          // UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
  "next": "^14.0.0",           // ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  "typescript": "^5.0.0"       // å‹ã‚·ã‚¹ãƒ†ãƒ 
}
```

### é–‹ç™ºç’°å¢ƒ
- **Node.js**: 18.xä»¥ä¸Š
- **Package Manager**: npm
- **IDE**: VS Codeæ¨å¥¨
- **OS**: Windows 10/11, macOS, Linux

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ è¨­è¨ˆ

### ã‚³ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«

#### `src/lib/advanced-search-engine.ts`
```typescript
// ä¸»è¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
export interface Chunk {
  content: string;
  metadata: PersonInfo;
}

export interface AdvancedSearchResult {
  person: PersonInfo;
  relevance: number;
  matchType: 'exact' | 'partial' | 'semantic';
  explanation: string;
}

// ä¸»è¦é–¢æ•°
export function initialize(persons: PersonInfo[]): void
export function search(query: string): AdvancedSearchResult[]
export function detectAggregationQuery(query: string): boolean
```

#### `src/lib/gemini-api.ts`
```typescript
// ä¸»è¦ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
export interface ChatMessage {
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}

// ä¸»è¦é–¢æ•°
export async function searchPersonsWithGemini(query: string, persons: PersonInfo[]): Promise<string>
export async function chatWithPersons(message: string, persons: PersonInfo[]): Promise<string>
```

#### `src/lib/data-manager.ts`
```typescript
// ä¸»è¦é–¢æ•°
export function addPersons(persons: PersonInfo[]): void
export function getPersons(): PersonInfo[]
export function addChatMessage(message: ChatMessage): void
export function getChatHistory(): ChatMessage[]
export function resetAllData(): void
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ

#### `src/components/ChatUI.tsx`
- **å½¹å‰²**: ãƒãƒ£ãƒƒãƒˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®è¡¨ç¤º
- **æ©Ÿèƒ½**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã€å±¥æ­´è¡¨ç¤ºã€ã‚¯ãƒªã‚¢æ©Ÿèƒ½
- **Props**: `persons`, `onSendMessage`, `onClearHistory`

#### `src/components/FileUpload.tsx`
- **å½¹å‰²**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- **æ©Ÿèƒ½**: ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã€ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
- **Props**: `onFileUpload`

#### `src/components/SearchExamples.tsx`
- **å½¹å‰²**: æ¤œç´¢ä¾‹ãƒœã‚¿ãƒ³ã®è¡¨ç¤º
- **æ©Ÿèƒ½**: ãƒ—ãƒªã‚»ãƒƒãƒˆæ¤œç´¢ã‚¯ã‚¨ãƒªã®å®Ÿè¡Œ
- **Props**: `onExampleClick`

## ğŸ” æ¤œç´¢ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ è¨­è¨ˆ

### æ¤œç´¢ã‚¿ã‚¤ãƒ—ã®è‡ªå‹•åˆ¤å®š
```typescript
// 1. å®Œå…¨ä¸€è‡´æ¤œç´¢
if (query.includes('ã•ã‚“') || query.includes('æ°')) {
  // åå‰ã§ã®å®Œå…¨ä¸€è‡´
}

// 2. ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢
if (query.includes('å¾—æ„') || query.includes('ã§ãã‚‹')) {
  // ã‚¹ã‚­ãƒ«ã§ã®æ¤œç´¢
}

// 3. éƒ¨ç½²æ¤œç´¢
if (query.includes('éƒ¨') || query.includes('éƒ¨ç½²')) {
  // éƒ¨ç½²ã§ã®æ¤œç´¢
}

// 4. é›†è¨ˆæ¤œç´¢
if (query.includes('ä½•äºº') || query.includes('äººæ•°')) {
  // é›†è¨ˆå‡¦ç†
}
```

### é¡ä¼¼æ€§è¨ˆç®—
```typescript
// ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦ã®è¨ˆç®—
function calculateCosineSimilarity(vec1: number[], vec2: number[]): number {
  const dotProduct = vec1.reduce((sum, val, i) => sum + val * vec2[i], 0);
  const magnitude1 = Math.sqrt(vec1.reduce((sum, val) => sum + val * val, 0));
  const magnitude2 = Math.sqrt(vec2.reduce((sum, val) => sum + val * val, 0));
  return dotProduct / (magnitude1 * magnitude2);
}
```

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ

### PersonInfoå‹å®šç¾©
```typescript
interface PersonInfo {
  name: string;           // æ°å
  department: string;     // éƒ¨ç½²
  skills: string[];       // ã‚¹ã‚­ãƒ«ï¼ˆé…åˆ—ï¼‰
  qualifications: string[]; // è³‡æ ¼ï¼ˆé…åˆ—ï¼‰
  selfPR: string;        // è‡ªå·±PR
  experience: string;     // çµŒé¨“
  yearsOfExperience: number; // çµŒé¨“å¹´æ•°
}
```

### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–
```typescript
// localStorageã‚­ãƒ¼
const STORAGE_KEYS = {
  PERSONS: 'rag_persons',
  CHAT_HISTORY: 'rag_chat_history'
};
```

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Header (File Upload)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Left Panel          â”‚           Right Panel               â”‚
â”‚  â”œâ”€â”€ Search Examples â”‚           â”œâ”€â”€ Chat Interface        â”‚
â”‚  â””â”€â”€ Error Log       â”‚           â””â”€â”€ Chat History          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³
- **ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—**: 2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- **ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ**: 1ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆç¸¦ç©ã¿ï¼‰
- **ãƒ¢ãƒã‚¤ãƒ«**: 1ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆç¸¦ç©ã¿ï¼‰

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
```css
/* ãƒ—ãƒ©ã‚¤ãƒãƒªã‚«ãƒ©ãƒ¼ */
--primary: #3B82F6;
--primary-dark: #2563EB;

/* ã‚»ã‚«ãƒ³ãƒ€ãƒªã‚«ãƒ©ãƒ¼ */
--secondary: #6B7280;
--secondary-light: #9CA3AF;

/* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ */
--accent: #10B981;
--accent-dark: #059669;

/* ã‚¨ãƒ©ãƒ¼ã‚«ãƒ©ãƒ¼ */
--error: #EF4444;
--warning: #F59E0B;
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### APIã‚­ãƒ¼ç®¡ç†
```typescript
// ç’°å¢ƒå¤‰æ•°ã§ã®ç®¡ç†
const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;

// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã§ã®ä½¿ç”¨
if (!apiKey) {
  throw new Error('Gemini APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“');
}
```

### ãƒ‡ãƒ¼ã‚¿ä¿è­·
- **å€‹äººæƒ…å ±**: ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§ã®ã¿ä¿å­˜
- **APIé€šä¿¡**: HTTPSçµŒç”±ã§ã®é€šä¿¡
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ©Ÿå¯†æƒ…å ±ã®æ¼æ´©é˜²æ­¢

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### æœ€é©åŒ–æˆ¦ç•¥
1. **ã‚³ãƒ¼ãƒ‰åˆ†å‰²**: å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã«ã‚ˆã‚‹é…å»¶èª­ã¿è¾¼ã¿
2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: localStorageã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
3. **éåŒæœŸå‡¦ç†**: async/awaitã«ã‚ˆã‚‹éãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°å‡¦ç†
4. **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ**: é•·æ™‚é–“å‡¦ç†ã®åˆ¶é™

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```typescript
// ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½
const withTimeout = <T>(promise: Promise<T>, timeout: number): Promise<T> => {
  return Promise.race([
    promise,
    new Promise<never>((_, reject) =>
      setTimeout(() => reject(new Error('ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ')), timeout)
    )
  ]);
};
```

## ğŸ“Š ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### å˜ä½“ãƒ†ã‚¹ãƒˆ
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ**: React Testing Library
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**: Jest
- **å‹ãƒã‚§ãƒƒã‚¯**: TypeScript

### çµ±åˆãƒ†ã‚¹ãƒˆ
- **APIé€£æºãƒ†ã‚¹ãƒˆ**: Gemini APIã¨ã®é€šä¿¡
- **ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ãƒ†ã‚¹ãƒˆ**: Excel/CSVèª­ã¿è¾¼ã¿
- **UIæ“ä½œãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³

## ğŸ”® å°†æ¥ã®æ‹¡å¼µè¨­è¨ˆ

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é€£æº
```typescript
// å°†æ¥çš„ãªDBè¨­è¨ˆ
interface DatabaseConfig {
  type: 'postgresql' | 'mongodb' | 'sqlite';
  connectionString: string;
  tableName: string;
}
```

### èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
```typescript
// å°†æ¥çš„ãªèªè¨¼è¨­è¨ˆ
interface AuthConfig {
  provider: 'google' | 'github' | 'email';
  permissions: string[];
}
```

---

**ä½œæˆæ—¥**: 2024å¹´12æœˆ  
**æœ€çµ‚æ›´æ–°**: 2024å¹´12æœˆ  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0 